#### H5链接接入流程


#### iOS适配

##### 权限申请描述 

* 在info.plist中添加"Privacy - Camera Usage Description"项，`Type`为String，`Value`为申请相机权限的理由描述文字。
* 在info.plist中添加"Privacy - Microphone Usage Description"项，`Type`为String，`Value`为申请麦克风权限的理由描述文字。
* 在info.plist中添加"Privacy - Location When In Use Usage Description"项，`Type`为String，`Value`为申请使用应用时定位权限的理由描述文字。


##### 支付方式设置

* 微信支付支持：在info.plist中添加"LSApplicationQueriesSchemes"项，`Type`为Array，增加一个子项, `Type`为String，`Value`为"weixin"。  
* 支付宝支持：在info.plist中添加"LSApplicationQueriesSchemes"项，`Type`为Array，增加一个子项, `Type`为String，`Value`为"alipay"。
* 微信支付完成回调：由天下信用后台为用户生成一个"`URL Scheme`"标识（下面以"`PYTXXY`"来示范）, 在项目工程里面的`info`选项卡下`URL Type`分组添加一项，`URL Schemes`的值为"`PYTXXY`"。添加以后在手机上运行一次项目，然后在手机`Safari`浏览器里面输入刚添加的"`PYTXXY://`"，验证是否能跳转到自己的应用。


##### WebView适配

`UIWebView`不需要适配即可拉起支付应用（微信、支付宝，下同），`WKWebView`需要在`WKNavigationDelegate`协议的"`decidePolicyForNavigationAction`"方法中添加对拉起支付应用的处理：

```objc
-(void)webView:(WKWebView *)webView decidePolicyForNavigationAction:(WKNavigationAction *)navigationAction decisionHandler:(void (^)(WKNavigationActionPolicy))decisionHandler
{
    NSURL *url = navigationAction.request.URL;
    //其它需要允许的scheme也可以放在此处
    if ([url.scheme isEqualToString:@"weixin"] || [url.scheme isEqualToString:@"alipay"]) {
        if ( [[UIApplication sharedApplication] canOpenURL:url]) {
            if (@available(iOS 10.0, *)) {
                [[UIApplication sharedApplication] openURL:url options:@{UIApplicationOpenURLOptionUniversalLinksOnly: @NO} completionHandler:nil];
            } else {
                [[UIApplication sharedApplication] openURL:url];
            }
            
            decisionHandler(WKNavigationActionPolicyCancel);
            return;
        }
    }
    
    decisionHandler(WKNavigationActionPolicyAllow);
}
```


#### Android适配

